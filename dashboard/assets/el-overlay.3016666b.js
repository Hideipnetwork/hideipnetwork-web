import{F,a$ as le,$ as ne,aK as me,an as ve,b0 as X,b1 as pe,b2 as ye,i as J,b3 as ge,b4 as Q,Z as K,b5 as be,b6 as he,b7 as Ce,b8 as U,h as G,y as j,d as W,a as Y,b9 as V,m as C,aO as we,ai as ke,U as Ee,A as ee,ba as Te,j as D,o as O,c as _,b as x,n as k,u as s,t as Se,w as B,l as q,s as Me,P as Be,D as Z,q as ae,v as re,bb as Ie,bc as De,bd as Le,V as $e,aU as oe,W as I,be as Ae,J as Pe,al as Oe,bf as Fe,bg as te,bh as Ne,ap as se,k as Re,a8 as ze,a9 as Ye,aQ as We,ae as He,aI as xe,T as Ue,aa as Ve,x as _e}from"./index.f8d8420e.js";import{U as ie}from"./event.0c3b2371.js";const Xe=(e,t)=>{if(!F)return!1;const o={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],l=le(e,o);return["scroll","auto","overlay"].some(n=>l.includes(n))},bo=(e,t)=>{if(!F)return;let o=e;for(;o;){if([window,document,document.documentElement].includes(o))return window;if(Xe(o,t))return o;o=o.parentNode}return o};let H;const Ke=e=>{var t;if(!F)return 0;if(H!==void 0)return H;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const l=o.offsetWidth;o.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",o.appendChild(n);const c=n.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),H=l-c,H};function ho(e,t){if(!F)return;if(!t){e.scrollTop=0;return}const o=[];let l=t.offsetParent;for(;l!==null&&e!==l&&e.contains(l);)o.push(l),l=l.offsetParent;const n=t.offsetTop+o.reduce((u,m)=>u+m.offsetTop,0),c=n+t.offsetHeight,i=e.scrollTop,a=i+e.clientHeight;n<i?e.scrollTop=n:c>a&&(e.scrollTop=c-e.clientHeight)}const je=(e,t,o)=>{let l={offsetX:0,offsetY:0};const n=a=>{const u=a.clientX,m=a.clientY,{offsetX:f,offsetY:g}=l,v=e.value.getBoundingClientRect(),d=v.left,h=v.top,L=v.width,N=v.height,R=document.documentElement.clientWidth,$=document.documentElement.clientHeight,z=-d+f,A=-h+g,E=R-d-L+f,T=$-h-N+g,P=w=>{const r=Math.min(Math.max(f+w.clientX-u,z),E),b=Math.min(Math.max(g+w.clientY-m,A),T);l={offsetX:r,offsetY:b},e.value.style.transform=`translate(${X(r)}, ${X(b)})`},p=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",p)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",n)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",n)};ne(()=>{me(()=>{o.value?c():i()})}),ve(()=>{i()})},qe=(e,t={})=>{pe(e)||ye("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||J("popup"),l=ge(()=>o.bm("parent","hidden"));if(!F||Q(document.body,l.value))return;let n=0,c=!1,i="0";const a=()=>{setTimeout(()=>{Ce(document==null?void 0:document.body,l.value),c&&document&&(document.body.style.width=i)},200)};K(e,u=>{if(!u){a();return}c=!Q(document.body,l.value),c&&(i=document.body.style.width),n=Ke(o.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,f=le(document.body,"overflowY");n>0&&(m||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${n}px)`),be(document.body,l.value)}),he(()=>a())},ce=e=>{if(!e)return{onClick:U,onMousedown:U,onMouseup:U};let t=!1,o=!1;return{onClick:i=>{t&&o&&e(i),t=o=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{o=i.target===i.currentTarget}}},Ze=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),Je={click:e=>e instanceof MouseEvent},Ge="overlay";var Qe=W({name:"ElOverlay",props:Ze,emits:Je,setup(e,{slots:t,emit:o}){const l=J(Ge),n=u=>{o("click",u)},{onClick:c,onMousedown:i,onMouseup:a}=ce(e.customMaskEvent?void 0:n);return()=>e.mask?Y("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:i,onMouseup:a},[C(t,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):we("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const eo=Qe,ue=Symbol("dialogInjectionKey"),de=G({center:Boolean,alignCenter:Boolean,closeIcon:{type:ke},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),oo={close:()=>!0},to=["aria-level"],so=["aria-label"],lo=["id"],no=W({name:"ElDialogContent"}),ao=W({...no,props:de,emits:oo,setup(e){const t=e,{t:o}=Ee(),{Close:l}=Ie,{dialogRef:n,headerRef:c,bodyId:i,ns:a,style:u}=ee(ue),{focusTrapRef:m}=ee(Te),f=D(()=>[a.b(),a.is("fullscreen",t.fullscreen),a.is("draggable",t.draggable),a.is("align-center",t.alignCenter),{[a.m("center")]:t.center},t.customClass]),g=De(m,n),v=D(()=>t.draggable);return je(n,c,v),(d,h)=>(O(),_("div",{ref:s(g),class:k(s(f)),style:ae(s(u)),tabindex:"-1"},[x("header",{ref_key:"headerRef",ref:c,class:k(s(a).e("header"))},[C(d.$slots,"header",{},()=>[x("span",{role:"heading","aria-level":d.ariaLevel,class:k(s(a).e("title"))},Se(d.title),11,to)]),d.showClose?(O(),_("button",{key:0,"aria-label":s(o)("el.dialog.close"),class:k(s(a).e("headerbtn")),type:"button",onClick:h[0]||(h[0]=L=>d.$emit("close"))},[Y(s(Be),{class:k(s(a).e("close"))},{default:B(()=>[(O(),q(Me(d.closeIcon||s(l))))]),_:1},8,["class"])],10,so)):Z("v-if",!0)],2),x("div",{id:s(i),class:k(s(a).e("body"))},[C(d.$slots,"default")],10,lo),d.$slots.footer?(O(),_("footer",{key:0,class:k(s(a).e("footer"))},[C(d.$slots,"footer")],2)):Z("v-if",!0)],6))}});var ro=re(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const io=G({...de,appendToBody:Boolean,beforeClose:{type:j(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ie]:e=>Le(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},uo=(e,t)=>{const l=Oe().emit,{nextZIndex:n}=$e();let c="";const i=oe(),a=oe(),u=I(!1),m=I(!1),f=I(!1),g=I(e.zIndex||n());let v,d;const h=Ae("namespace",Fe),L=D(()=>{const y={},M=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(y[`${M}-margin-top`]=e.top),e.width&&(y[`${M}-width`]=X(e.width))),y}),N=D(()=>e.alignCenter?{display:"flex"}:{});function R(){l("opened")}function $(){l("closed"),l(ie,!1),e.destroyOnClose&&(f.value=!1)}function z(){l("close")}function A(){d==null||d(),v==null||v(),e.openDelay&&e.openDelay>0?{stop:v}=te(()=>p(),e.openDelay):p()}function E(){v==null||v(),d==null||d(),e.closeDelay&&e.closeDelay>0?{stop:d}=te(()=>w(),e.closeDelay):w()}function T(){function y(M){M||(m.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(y):E()}function P(){e.closeOnClickModal&&T()}function p(){!F||(u.value=!0)}function w(){u.value=!1}function r(){l("openAutoFocus")}function b(){l("closeAutoFocus")}function S(y){var M;((M=y.detail)==null?void 0:M.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&qe(u);function fe(){e.closeOnPressEscape&&T()}return K(()=>e.modelValue,y=>{y?(m.value=!1,A(),f.value=!0,g.value=e.zIndex?g.value++:n(),Pe(()=>{l("open"),t.value&&(t.value.scrollTop=0)})):u.value&&E()}),K(()=>e.fullscreen,y=>{!t.value||(y?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),ne(()=>{e.modelValue&&(u.value=!0,f.value=!0,A())}),{afterEnter:R,afterLeave:$,beforeLeave:z,handleClose:T,onModalClick:P,close:E,doClose:w,onOpenAutoFocus:r,onCloseAutoFocus:b,onCloseRequested:fe,onFocusoutPrevented:S,titleId:i,bodyId:a,closed:m,style:L,overlayDialogStyle:N,rendered:f,visible:u,zIndex:g}},fo=["aria-label","aria-labelledby","aria-describedby"],mo=W({name:"ElDialog",inheritAttrs:!1}),vo=W({...mo,props:io,emits:co,setup(e,{expose:t}){const o=e,l=Ne();se({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},D(()=>!!l.title)),se({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},D(()=>!!o.customClass));const n=J("dialog"),c=I(),i=I(),a=I(),{visible:u,titleId:m,bodyId:f,style:g,overlayDialogStyle:v,rendered:d,zIndex:h,afterEnter:L,afterLeave:N,beforeLeave:R,handleClose:$,onModalClick:z,onOpenAutoFocus:A,onCloseAutoFocus:E,onCloseRequested:T,onFocusoutPrevented:P}=uo(o,c);Re(ue,{dialogRef:c,headerRef:i,bodyId:f,ns:n,rendered:d,style:g});const p=ce(z),w=D(()=>o.draggable&&!o.fullscreen);return t({visible:u,dialogContentRef:a}),(r,b)=>(O(),q(Ve,{to:"body",disabled:!r.appendToBody},[Y(Ue,{name:"dialog-fade",onAfterEnter:s(L),onAfterLeave:s(N),onBeforeLeave:s(R),persisted:""},{default:B(()=>[ze(Y(s(eo),{"custom-mask-event":"",mask:r.modal,"overlay-class":r.modalClass,"z-index":s(h)},{default:B(()=>[x("div",{role:"dialog","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:s(m),"aria-describedby":s(f),class:k(`${s(n).namespace.value}-overlay-dialog`),style:ae(s(v)),onClick:b[0]||(b[0]=(...S)=>s(p).onClick&&s(p).onClick(...S)),onMousedown:b[1]||(b[1]=(...S)=>s(p).onMousedown&&s(p).onMousedown(...S)),onMouseup:b[2]||(b[2]=(...S)=>s(p).onMouseup&&s(p).onMouseup(...S))},[Y(s(We),{loop:"",trapped:s(u),"focus-start-el":"container",onFocusAfterTrapped:s(A),onFocusAfterReleased:s(E),onFocusoutPrevented:s(P),onReleaseRequested:s(T)},{default:B(()=>[s(d)?(O(),q(ro,He({key:0,ref_key:"dialogContentRef",ref:a},r.$attrs,{"custom-class":r.customClass,center:r.center,"align-center":r.alignCenter,"close-icon":r.closeIcon,draggable:s(w),fullscreen:r.fullscreen,"show-close":r.showClose,title:r.title,"aria-level":r.headerAriaLevel,onClose:s($)}),xe({header:B(()=>[r.$slots.title?C(r.$slots,"title",{key:1}):C(r.$slots,"header",{key:0,close:s($),titleId:s(m),titleClass:s(n).e("title")})]),default:B(()=>[C(r.$slots,"default")]),_:2},[r.$slots.footer?{name:"footer",fn:B(()=>[C(r.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,fo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ye,s(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var po=re(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Co=_e(po);export{eo as E,qe as a,ce as b,Co as c,bo as g,ho as s,je as u};
