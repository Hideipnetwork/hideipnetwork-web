import{d as B,r as F,dr as b,W as y,dA as E,o as V,c as h,b as d,a as s,w as t,u as _,dB as x,aG as C,dC as I,g as k,aP as S,p as D,f as N,_ as T}from"./index.f8d8420e.js";import{c,E as q,a as A,b as K}from"./index.596e472d.js";import{u as U}from"./user.88a24e52.js";import{g as $}from"./base64.2ca808bf.js";import"./_baseClone.b8f45c6b.js";import"./event.0c3b2371.js";const G=r=>(D("data-v-b43dff38"),r=r(),N(),r),M={class:"login-wrap"},P={class:"ms-login"},R=G(()=>d("div",{class:"ms-title"},"\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",-1)),W={class:"login-btn"},j=k("\u767B\u5F55"),z=B({__name:"login",setup(r){const f=U(),o=F({username:"",password:""}),g={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},w=b(),u=y(),p=l=>{!l||l.validate(async e=>{if(e)try{await f.login({password:$.encode(o.password),username:o.username}),w.push("/")}catch{c.error("Invalid login")}else return c.error("\u53C2\u6570\u4E0D\u5BF9"),!1})};return E().clearTags(),(l,e)=>{const n=S,i=q,m=A,v=K;return V(),h("div",M,[d("div",P,[R,s(v,{model:o,rules:g,ref_key:"login",ref:u,"label-width":"0px",class:"ms-content"},{default:t(()=>[s(m,{prop:"username"},{default:t(()=>[s(i,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),placeholder:"username"},{prepend:t(()=>[s(n,{icon:_(x)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),s(m,{prop:"password"},{default:t(()=>[s(i,{type:"password",placeholder:"password",modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),onKeyup:e[2]||(e[2]=C(a=>p(u.value),["enter"]))},{prepend:t(()=>[s(n,{icon:_(I)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),d("div",W,[s(n,{type:"primary",onClick:e[3]||(e[3]=a=>p(u.value))},{default:t(()=>[j]),_:1})])]),_:1},8,["model"])])])}}});const Z=T(z,[["__scopeId","data-v-b43dff38"]]);export{Z as default};
